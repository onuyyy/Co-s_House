<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>문의 상세보기</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-8 mx-auto">
                <div class="card">
                    <div class="card-header">
                        <h4>문의 상세보기</h4>
                    </div>
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col-sm-3"><strong>제목:</strong></div>
                            <div class="col-sm-9" th:text="${question.questionTitle}">문의 제목</div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-3"><strong>작성자:</strong></div>
                            <div class="col-sm-9" th:text="${question.userName}">작성자명</div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-3"><strong>문의유형:</strong></div>
                            <div class="col-sm-9" th:text="${question.questionType == 'QT_001' ? '상품 문의' : (question.questionType == 'QT_002' ? '배송 문의' : '기타 문의')}">문의유형</div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-3"><strong>작성일:</strong></div>
                            <div class="col-sm-9" th:text="${#temporals.format(question.questionCreatedAt, 'yyyy-MM-dd HH:mm')}">작성일</div>
                        </div>
                        <div class="row mb-">
                            <div class="col-sm-3"><strong>상태:</strong></div>
                            <div class="col-sm-9" th:text="${question.questionStatus != null ? question.questionStatus : ''}">답변상태</div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-sm-3"><strong>비밀글:</strong></div>
                            <div class="col-sm-9" th:text="${question.isSecret ? '예' : '아니오'}">비밀글 여부</div>
                        </div>
                        <hr>
                        <div class="row mb-4">
                            <div class="col-12">
                                <strong>문의내용:</strong>
                                <div class="mt-2 p-3 bg-light rounded" th:text="${question.questionContent}">
                                    문의 내용이 여기에 표시됩니다.
                                </div>
                            </div>
                        </div>

                        <!-- 답변 섹션 -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <strong>답변내용:</strong>
                                <!-- 답변이 있는 경우 -->
                                <div class="mt-2 p-3 bg-info bg-opacity-10 rounded">
                                    <!-- 현재는 답변 기능 미구현, 추후 추가 예정 -->
                                    <p class="text-muted mb-0">아직 답변이 등록되지 않았습니다.</p>
                                    <!-- 답변 있을 때: th:text="${answer != null ? answer.content : '답변이 없습니다.'}" -->
                                </div>

                                <!-- 관리자 답변 입력 폼 (현재는 표시만, 추후 기능 구현) -->
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="d-flex justify-content-between">
                            <a href="/question" class="btn btn-secondary">목록으로</a>
                            <div>
                                <!-- 로그인 기능 완성 후: 본인이 작성한 글만 수정/삭제 버튼 표시 -->
                                <!-- 예시: th:if="${session.userId == question.userId}" -->
                                <a th:href="@{/question/{id}/edit(id=${question.questionId})}" class="btn btn-primary">수정</a>
                                <form th:action="@{/question/{id}/delete(id=${question.questionId})}" method="post" class="d-inline" onsubmit="return confirm('정말 삭제하시겠습니까?')">
                                    <button type="submit" class="btn btn-danger">삭제</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>