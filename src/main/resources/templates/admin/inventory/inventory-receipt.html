<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/admin-layout}"
      lang="ko">
<head>
    <title>재고 입고</title>
    <style>
        .receipt-form {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #333;
        }
        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        .btn-primary {
            background-color: #007bff;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        .btn-primary:hover {
            background-color: #0056b3;
        }
        .btn-secondary {
            background-color: #6c757d;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div layout:fragment="content-header" class="content-header">
        <h2 style="color: #333; font-size: 20px;">재고 입고</h2>
    </div>

    <div layout:fragment="content">
        <div class="receipt-form">
            <form id="receiptForm">
                <div class="form-group">
                    <label for="productId">상품 ID</label>
                    <input type="number" id="productId" name="productId" class="form-control" required>
                </div>

                <div class="form-group">
                    <label for="receiptQuantity">입고 수량</label>
                    <input type="number" id="receiptQuantity" name="receiptQuantity" class="form-control" min="1" required>
                </div>

                <div class="form-group">
                    <label for="receiptDate">입고 날짜</label>
                    <input type="date" id="receiptDate" name="receiptDate" class="form-control" required>
                </div>

                <div class="form-group">
                    <label for="receiptStatus">입고 상태</label>
                    <select id="receiptStatus" name="receiptStatus" class="form-control" required>
                        <option value="">선택하세요</option>
                        <option value="PENDING">대기</option>
                        <option value="COMPLETED">완료</option>
                        <option value="CANCELLED">취소</option>
                    </select>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button type="button" class="btn-secondary" onclick="history.back()">취소</button>
                    <button type="submit" class="btn-primary">입고 처리</button>
                </div>
            </form>
        </div>
    </div>

    <script layout:fragment="scripts">
        // 오늘 날짜를 기본값으로 설정
        document.getElementById('receiptDate').valueAsDate = new Date();

        // 폼 제출 처리
        document.getElementById('receiptForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const formData = {
                productId: document.getElementById('productId').value,
                receiptQuantity: parseInt(document.getElementById('receiptQuantity').value),
                receiptDate: document.getElementById('receiptDate').value,
                receiptStatus: document.getElementById('receiptStatus').value
            };

            fetch('/api/admin/inventory/receipt', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                alert('입고 처리가 완료되었습니다.');
                console.log('Success:', data);
                // 성공 후 목록으로 이동
                window.location.href = '/api/admin/inventory';
            })
            .catch((error) => {
                alert('입고 처리 중 오류가 발생했습니다.');
                console.error('Error:', error);
            });
        });
    </script>
</body>
</html>