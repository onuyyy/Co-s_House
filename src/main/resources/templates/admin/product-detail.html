    <!DOCTYPE html>
    <html xmlns:th="http://www.thymeleaf.org"
          xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
          layout:decorate="~{layout/admin-layout}"
          lang="ko">
    <head>
        <title>ìƒí’ˆ ìƒì„¸ì •ë³´</title>
    </head>
    <body>
        <div layout:fragment="content-header" class="content-header">
            <h2 style="color: #333; font-size: 20px;">ìƒí’ˆ ìƒì„¸ì •ë³´</h2>
            <div class="header-actions">
                <a th:href="@{/api/admin/products}" class="btn btn-secondary">ëª©ë¡ìœ¼ë¡œ</a>
            </div>
        </div>

        <div layout:fragment="content">
            <div th:if="${param.success}" class="alert alert-success">ìƒí’ˆ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
            <div th:if="${param.error}" class="alert alert-danger" th:text="${param.error}">ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</div>

            <div class="mode-selector">
                <button id="viewMode" class="mode-btn active" onclick="toggleMode('view')">ğŸ‘ï¸ ë³´ê¸° ëª¨ë“œ</button>
                <button id="editMode" class="mode-btn" onclick="toggleMode('edit')">âœï¸ ìˆ˜ì • ëª¨ë“œ</button>
            </div>

            <!-- ì½ê¸° ì „ìš© -->
            <div class="detail-card" id="viewSection">
                <h3>ğŸ“¦ ìƒí’ˆ ì •ë³´</h3>
                <div class="detail-grid">
                    <div class="detail-label">ìƒí’ˆëª…</div><div class="detail-value" th:text="${product.productTitle}">ìƒí’ˆëª…</div>
                    <div class="detail-label">ë¸Œëœë“œ</div><div class="detail-value" th:text="${product.brandName ?: '-'}">ë¸Œëœë“œ</div>
                    <div class="detail-label">ì›ê°€</div><div class="detail-value" th:text="${product.originalPrice != null ? #numbers.formatCurrency(product.originalPrice) : '-'}">ì›ê°€</div>
                    <div class="detail-label">íŒë§¤ê°€</div><div class="detail-value" th:text="${product.salePrice != null ? #numbers.formatCurrency(product.salePrice) : '-'}">íŒë§¤ê°€</div>
                    <div class="detail-label">ì¬ê³ </div><div class="detail-value" th:text="${product.stockQuantity ?: 0}">ì¬ê³ </div>
                    <div class="detail-label">ìƒíƒœ</div><div class="detail-value"><span th:class="${product.productStatus == 'íŒë§¤ì¤‘' ? 'status-active' : 'status-inactive'}" th:text="${product.productStatus ?: '-'}">ìƒíƒœ</span></div>
                </div>
            </div>

            <!-- ìˆ˜ì • í¼ -->
            <div class="detail-card" id="editSection" style="display: none;">
                <h3>âœï¸ ìƒí’ˆ ì •ë³´ ìˆ˜ì •</h3>
                <form th:action="@{/api/admin/products/{productId}/update(productId=${product.productId})}" method="post">
                    <div class="form-group">
                        <label for="productTitle">ìƒí’ˆëª… *</label>
                        <input type="text" id="productTitle" name="productTitle" th:value="${product.productTitle}" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="originalPrice">ì›ê°€</label>
                        <input type="number" id="originalPrice" name="originalPrice" th:value="${product.originalPrice}" step="0.01" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="salePrice">íŒë§¤ê°€</label>
                        <input type="number" id="salePrice" name="salePrice" th:value="${product.salePrice}" step="0.01" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="stockQuantity">ì¬ê³ ìˆ˜ëŸ‰</label>
                        <input type="number" id="stockQuantity" name="stockQuantity" th:value="${product.stockQuantity}" class="form-control">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">ğŸ’¾ ìˆ˜ì • ì €ì¥</button>
                        <button type="button" class="btn btn-danger" onclick="deleteProduct()">ğŸ—‘ï¸ ì‚­ì œ</button>
                        <button type="button" class="btn btn-secondary" onclick="toggleMode('view')">âŒ ì·¨ì†Œ</button>
                    </div>
                </form>
            </div>

            <div class="readonly-message" id="readonlyMessage">
                <strong>ì½ê¸° ì „ìš© ëª¨ë“œ</strong><br>í˜„ì¬ ìƒí’ˆ ì •ë³´ ì¡°íšŒë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.
            </div>
        </div>

        <th:block layout:fragment="extra-css">
            <style>
                .mode-selector { display: flex; gap: 10px; margin-bottom: 20px; padding: 10px; background-color: #f8f9fa; border-radius: 8px; }
                .mode-btn { padding: 8px 16px; border: 1px solid #dee2e6; background-color: #ffffff; color: #6c757d; border-radius: 6px; cursor: pointer; }
                .mode-btn.active { background-color: #007bff; color: white; }
                .detail-grid { display: grid; grid-template-columns: 150px 1fr; gap: 12px 20px; }
                .detail-label { font-weight: 600; background-color: #f8f9fa; padding: 8px 12px; border-radius: 6px; }
                .detail-value { padding: 8px 12px; border: 1px solid #e9ecef; border-radius: 6px; }
                .form-group { margin-bottom: 15px; }
                .form-control { width: 100%; padding: 10px; border: 1px solid #ced4da; border-radius: 6px; }
                .form-actions { display: flex; gap: 10px; margin-top: 20px; }
                .readonly-message { background-color: #e7f3ff; padding: 16px; border-radius: 8px; margin-top: 20px; }
                .status-active { background-color: #28a745; color: white; padding: 4px 8px; border-radius: 4px; }
                .status-inactive { background-color: #dc3545; color: white; padding: 4px 8px; border-radius: 4px; }
                .alert { padding: 12px; margin-bottom: 20px; border-radius: 4px; }
                .alert-success { color: #155724; background-color: #d4edda; }
                .alert-danger { color: #721c24; background-color: #f8d7da; }
            </style>
        </th:block>

        <th:block layout:fragment="extra-scripts">
            <script>
                function toggleMode(mode) {
                    const viewBtn = document.getElementById('viewMode');
                    const editBtn = document.getElementById('editMode');
                    const viewSection = document.getElementById('viewSection');
                    const editSection = document.getElementById('editSection');
                    const readonlyMessage = document.getElementById('readonlyMessage');

                    if (mode === 'view') {
                        viewBtn.classList.add('active'); editBtn.classList.remove('active');
                        viewSection.style.display = 'block'; editSection.style.display = 'none'; readonlyMessage.style.display = 'block';
                    } else {
                        editBtn.classList.add('active'); viewBtn.classList.remove('active');
                        viewSection.style.display = 'none'; editSection.style.display = 'block'; readonlyMessage.style.display = 'none';
                    }
                }
                function deleteProduct() {
                    if (confirm('ì •ë§ë¡œ ì´ ìƒí’ˆì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        const form = document.createElement('form');
                        form.method = 'POST';
                        form.action = '/api/admin/products/' + [[${product.productId}]] + '/delete';
                        document.body.appendChild(form);
                        form.submit();
                    }
                }
            </script>
        </th:block>
    </body>
    </html>