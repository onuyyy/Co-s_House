<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/admin-layout}"
      lang="ko">
<head>
    <title>브랜드 등록</title>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
    <!-- Content Header -->
    <div layout:fragment="content-header" class="content-header">
        <div>
            <div class="breadcrumb">
                <a href="/api/admin/brands">브랜드 관리</a> > 브랜드 등록
            </div>
            <h2 class="page-title-large">브랜드 등록</h2>
        </div>
        <div>
            <a href="/api/admin/brands" class="btn btn-secondary">목록으로</a>
        </div>
    </div>

    <!-- Main Content -->
    <div layout:fragment="content">
        <!-- 알림 메시지 -->
        <div th:if="${param.success}" class="alert alert-success">
            브랜드가 성공적으로 등록되었습니다.
        </div>
        <div th:if="${param.error}" class="alert alert-danger">
            <span th:text="${param.error}">오류가 발생했습니다.</span>
        </div>

        <div class="form-card">
            <div class="form-card-header">
                <h3>🏷️ 브랜드 정보 입력</h3>
            </div>
            <div class="form-card-body">
                <form th:action="@{/api/admin/brands}" method="post" class="brand-form">

                    <!-- 기본 정보 -->
                    <div class="form-section">
                        <h4 class="section-title">기본 정보</h4>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="brandName" class="required">브랜드명 *</label>
                                <input type="text" id="brandName" name="brandName"
                                       class="form-control" required maxlength="100"
                                       placeholder="브랜드명을 입력하세요">
                            </div>

                            <div class="form-group">
                                <label for="logoUrl">로고 URL</label>
                                <input type="url" id="logoUrl" name="logoUrl"
                                       class="form-control" maxlength="500"
                                       placeholder="https://example.com/logo.png">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="brandDescription">브랜드 설명</label>
                                <textarea id="brandDescription" name="brandDescription"
                                          class="form-control" rows="4" maxlength="1000"
                                          placeholder="브랜드에 대한 자세한 설명을 입력하세요"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- 버튼 영역 -->
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="icon">💾</i> 브랜드 등록
                        </button>
                        <a href="/api/admin/brands" class="btn btn-secondary">
                            <i class="icon">❌</i> 취소
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <th:block layout:fragment="extra-css">
        <link rel="stylesheet" th:href="@{/css/admin/admin-common.css}">
        <link rel="stylesheet" th:href="@{/css/admin/brand.css}">
    </th:block>

    <th:block layout:fragment="extra-scripts">
        <script>
            // 로고 URL 유효성 검사
            document.getElementById('logoUrl').addEventListener('blur', function() {
                const url = this.value.trim();
                if (url && !isValidUrl(url)) {
                    alert('올바른 URL 형식으로 입력해주세요.');
                    this.focus();
                }
            });

            function isValidUrl(string) {
                try {
                    new URL(string);
                    return true;
                } catch (_) {
                    return false;
                }
            }

            // 폼 제출 전 유효성 검사
            document.querySelector('.brand-form').addEventListener('submit', function(e) {
                const brandName = document.getElementById('brandName').value.trim();

                if (!brandName) {
                    alert('브랜드명을 입력해주세요.');
                    e.preventDefault();
                    document.getElementById('brandName').focus();
                    return false;
                }

                if (brandName.length > 100) {
                    alert('브랜드명은 100자 이내로 입력해주세요.');
                    e.preventDefault();
                    document.getElementById('brandName').focus();
                    return false;
                }
            });
        </script>
    </th:block>
</body>
</html>