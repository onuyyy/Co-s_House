<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
      layout:decorate="~{layout/admin-layout}"
      lang="ko">
<head>
    <title>ê´€ë¦¬ì ê´€ë¦¬</title>
    <link rel="stylesheet" href="/css/app.css" />
</head>
<body>
    <!-- Content Header -->
    <div layout:fragment="content-header" class="content-header">
        <h2 style="color: #333; font-size: 20px;">ğŸ‘¨â€ğŸ’¼ ê´€ë¦¬ì ê´€ë¦¬</h2>
        <div class="search-section">
            <form method="get" style="display: flex; gap: 10px;">
                <select name="searchType" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option value="NAME" th:selected="${param.searchType} == 'NAME'">ì´ë¦„</option>
                    <option value="EMAIL" th:selected="${param.searchType} == 'EMAIL'">ì´ë©”ì¼</option>
                    <option value="NICKNAME" th:selected="${param.searchType} == 'NICKNAME'">ë‹‰ë„¤ì„</option>
                    <option value="PHONE" th:selected="${param.searchType} == 'PHONE'">ì—°ë½ì²˜</option>
                    <option value="ROLE" th:selected="${param.searchType} == 'ROLE'">ì—­í• </option>
                </select>
                <input type="text" name="searchValue" th:value="${param.searchValue}" 
                       class="search-input" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                <button type="submit" class="btn btn-primary">ê²€ìƒ‰</button>
            </form>
        </div>
    </div>

    <!-- Main Content -->
    <div layout:fragment="content">
        <!-- ì•Œë¦¼ ë©”ì‹œì§€ -->
        <div th:if="${param.deleted}" class="alert alert-success">
            ê´€ë¦¬ìê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.
        </div>
        <div th:if="${param.error}" class="alert alert-danger">
            <span th:text="${param.error}">ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</span>
        </div>

        <!-- ê´€ë¦¬ì ì•ˆë‚´ -->
        <div class="admin-info-banner">
            <div class="banner-icon">ğŸ”</div>
            <div class="banner-content">
                <strong>ê´€ë¦¬ì ê³„ì • ê´€ë¦¬</strong><br>
                ì‹œìŠ¤í…œ ê´€ë¦¬ì(ADMIN) ë° ìµœê³  ê´€ë¦¬ì(SUPER_ADMIN) ê³„ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
            </div>
            <div class="banner-stats">
                <span class="stat-item">ì´ <strong th:text="${adminList.totalElements}">0</strong>ëª…</span>
            </div>
        </div>

        <div class="data-table">
            <table>
                <thead>
                    <tr>
                        <th>ì´ë¦„</th>
                        <th>ì´ë©”ì¼</th>
                        <th>ë‹‰ë„¤ì„</th>
                        <th>ê´€ë¦¬ì ë“±ê¸‰</th>
                        <th>ì—°ë½ì²˜</th>
                        <th>ê°€ì…ì¼</th>
                        <th>ê´€ë¦¬</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="admin : ${adminList.content}">
                        <td>
                            <a th:href="@{/api/admin/admins/{adminId}(adminId=${admin.userId})}" 
                               class="admin-name-link"
                               th:text="${admin.userName}">ê´€ë¦¬ìëª…</a>
                        </td>
                        <td class="email-cell" th:text="${admin.userEmail}">ì´ë©”ì¼</td>
                        <td th:text="${admin.userNickname}">ë‹‰ë„¤ì„</td>
                        <td>
                            <span th:class="${admin.userRoleName == 'SUPER_ADMIN' ? 'role-badge super-admin-role' : 'role-badge admin-role'}"
                                  th:text="${admin.userRoleName == 'SUPER_ADMIN' ? 'ìµœê³  ê´€ë¦¬ì' : 'ê´€ë¦¬ì'}">ì—­í• </span>
                        </td>
                        <td th:text="${admin.userPhone ?: '-'}">ì—°ë½ì²˜</td>
                        <td th:text="${admin.userCreatedAt != null ? #temporals.format(admin.userCreatedAt, 'yyyy-MM-dd') : '-'}">ê°€ì…ì¼</td>
                        <td>
                            <div class="action-buttons">
                                <a th:href="@{/api/admin/admins/{adminId}(adminId=${admin.userId})}" 
                                   class="btn btn-sm btn-primary">ìƒì„¸</a>
                            </div>
                        </td>
                    </tr>
                    <tr th:if="${adminList.content.empty}">
                        <td colspan="7" style="padding: 40px; color: #666; text-align: center;">
                            ë“±ë¡ëœ ê´€ë¦¬ìê°€ ì—†ìŠµë‹ˆë‹¤.
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div class="pagination" th:if="${adminList.totalPages > 0}">
            <!-- Previous -->
            <a th:if="${adminList.hasPrevious()}" 
               th:href="@{/api/admin/admins(page=${adminList.number - 1}, searchType=${param.searchType}, searchValue=${param.searchValue})}">â€¹</a>

            <!-- Page Numbers -->
            <th:block th:each="pageNum : ${#numbers.sequence(0, adminList.totalPages - 1)}">
                <span th:if="${pageNum == adminList.number}" class="current" th:text="${pageNum + 1}">1</span>
                <a th:unless="${pageNum == adminList.number}" 
                   th:href="@{/api/admin/admins(page=${pageNum}, searchType=${param.searchType}, searchValue=${param.searchValue})}"
                   th:text="${pageNum + 1}">1</a>
            </th:block>

            <!-- Next -->
            <a th:if="${adminList.hasNext()}" 
               th:href="@{/api/admin/admins(page=${adminList.number + 1}, searchType=${param.searchType}, searchValue=${param.searchValue})}">â€º</a>
        </div>
    </div>

    <th:block layout:fragment="extra-css">
        <style>
            .admin-info-banner {
                display: flex;
                align-items: center;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                border-radius: 12px;
                padding: 20px;
                margin-bottom: 20px;
                gap: 16px;
            }
            
            .banner-icon {
                font-size: 32px;
                flex-shrink: 0;
            }
            
            .banner-content {
                flex: 1;
                line-height: 1.5;
            }
            
            .banner-stats {
                display: flex;
                flex-direction: column;
                align-items: flex-end;
                gap: 8px;
            }
            
            .stat-item {
                background-color: rgba(255, 255, 255, 0.2);
                padding: 8px 12px;
                border-radius: 8px;
                font-size: 14px;
            }
            
            .admin-name-link {
                text-decoration: none;
                color: #007bff;
                font-weight: 600;
                font-size: 15px;
            }
            
            .admin-name-link:hover {
                text-decoration: underline;
                color: #0056b3;
            }
            
            .email-cell {
                font-family: monospace;
                font-size: 0.9em;
                color: #495057;
            }
            
            .role-badge {
                padding: 4px 12px;
                border-radius: 12px;
                font-size: 12px;
                font-weight: bold;
                text-transform: uppercase;
            }
            
            .admin-role {
                background-color: #fd7e14;
                color: white;
            }
            
            .super-admin-role {
                background: linear-gradient(45deg, #dc3545, #6f42c1);
                color: white;
                position: relative;
            }
            
            .super-admin-role::before {
                content: 'ğŸ‘‘';
                margin-right: 4px;
            }
            
            .action-buttons {
                display: flex;
                gap: 5px;
            }
            
            .btn-sm {
                padding: 4px 8px;
                font-size: 12px;
                border-radius: 4px;
            }
            
            .alert {
                padding: 12px 16px;
                margin-bottom: 20px;
                border: 1px solid transparent;
                border-radius: 4px;
            }
            
            .alert-success {
                color: #155724;
                background-color: #d4edda;
                border-color: #c3e6cb;
            }
            
            .alert-danger {
                color: #721c24;
                background-color: #f8d7da;
                border-color: #f5c6cb;
            }
        </style>
    </th:block>
</body>
</html>