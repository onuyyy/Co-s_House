<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/layout :: head('주문/결제')">
  <link rel="stylesheet" th:href="@{/css/order.css}">
</head>
<body class="page font-body">
  <div th:replace="fragments/layout :: header"></div>

  <div class="container">
    <h1 class="page-title">주문/결제</h1>

    <div class="order-layout">
      <!-- 왼쪽 섹션 -->
      <div class="left-section">

        <!-- 주문자 정보 섹션 -->
        <div class="section-card">
          <h2 class="section-title">배송지
            <button type="button" class="coupon-link">변경</button>
          </h2>

          <div class="form-group">
            <label class="form-label">받는 분</label>
            <input type="text" class="input" th:value="${order.user.userName}" readonly>
          </div>

          <div class="form-group">
            <label class="form-label">연락처</label>
            <input type="text" class="input" th:value="${order.user.phone}" readonly>
          </div>

          <div class="form-group">
            <label class="form-label">주소</label>
            <input type="text" class="input" th:value="${order.user.address}" readonly>
          </div>

          <div class="form-group">
            <button type="button" class="address-search-btn coupon-link">기본 배송지로 저장</button>
          </div>

          <div class="form-group">
            <label class="form-label">배송시 요청사항을 선택해주세요</label>
            <select class="input">
              <option>배송시 요청사항을 선택해주세요</option>
              <option>문 앞에 놓아주세요</option>
              <option>경비실에 맡겨주세요</option>
              <option>택배보관함에 넣어주세요</option>
              <option>직접 받겠습니다</option>
            </select>
          </div>
        </div>

        <!-- 주문 상품 정보 섹션 -->
        <div class="section-card">
          <h2 class="section-title">주문상품
            <span class="item-count" th:text="${#lists.size(order.items)} + '건'">1건</span>
          </h2>

          <div class="order-items">
            <div class="order-item" th:each="item : ${order.items}">
              <div class="item-info">
                <div class="item-image">
                  <div class="product-img-placeholder">📦</div>
                </div>
                <div class="item-details">
                  <p class="item-name">상품명</p>
                  <p class="item-option" th:if="${item.productOptionName != null}" th:text="${item.productOptionName}">옵션명</p>
                  <p class="item-quantity" th:text="'수량: ' + ${item.quantity} + '개'">수량: 1개</p>
                </div>
              </div>
              <div class="item-shipping">
                <div>
                  <p class="item-price" th:text="${#numbers.formatDecimal(item.price, 0, 'COMMA', 0, 'POINT')} + '원'">139,000원</p>
                  <span class="shipping-label">무료배송</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 쿠폰 섹션 -->
        <div class="section-card">
          <h2 class="section-title">장바구니 쿠폰</h2>
          <p class="coupon-message">사용 가능한 쿠폰이 없습니다</p>
          <button type="button" class="coupon-link">쿠폰코드가 있으신가요?</button>
        </div>

        <!-- 포인트 섹션 -->
        <div class="section-card">
          <h2 class="section-title">포인트</h2>
          <div class="point-input-group">
            <input type="number" class="point-input" placeholder="0" value="0">
            <button type="button" class="point-all-btn coupon-link">전액 사용</button>
          </div>
          <p class="point-available">사용 가능 포인트 <span class="point-amount">155,5555 P</span></p>
        </div>

        <!-- 결제수단 섹션 -->
        <div class="section-card">
          <h2 class="section-title">결제수단</h2>

          <div class="payment-method">
            <div class="method-option">
              <input type="radio" id="toss" name="payment" value="toss" checked>
              <label for="toss">
                <span class="method-logo">💳</span> 토스페이 <span class="method-tag">추천</span>
              </label>
            </div>

            <div class="method-option">
              <input type="radio" id="card" name="payment" value="card">
              <label for="card">
                <span class="method-logo">💳</span> 카드
              </label>
            </div>

            <div class="method-option">
              <input type="radio" id="phone" name="payment" value="phone">
              <label for="phone">
                <span class="method-logo">📱</span> 휴대폰결제
              </label>
            </div>

            <div class="method-option">
              <input type="radio" id="bank" name="payment" value="bank">
              <label for="bank">
                <span class="method-logo">🏦</span> 무통장입금
              </label>
            </div>

            <div class="method-option">
              <input type="radio" id="simple" name="payment" value="simple">
              <label for="simple">
                <span class="method-logo">💰</span> 간편결제
              </label>
            </div>

            <div class="method-option">
              <input type="radio" id="account" name="payment" value="account">
              <label for="account">
                <span class="method-logo">🏧</span> 계좌이체
              </label>
            </div>

            <div class="method-option">
              <input type="radio" id="vbank" name="payment" value="vbank">
              <label for="vbank">
                <span class="method-logo">🏛️</span> 가상계좌
              </label>
            </div>

            <div class="method-option">
              <input type="radio" id="gift" name="payment" value="gift">
              <label for="gift">
                <span class="method-logo">🎁</span> 상품권
              </label>
            </div>

            <div class="method-option">
              <input type="radio" id="hana" name="payment" value="hana">
              <label for="hana">
                <span class="method-logo">🏦</span> 하나론
              </label>
            </div>
          </div>

          <div class="installment-info">
            <p>일시불</p>
            <small>1회 이상 무이자</small>
            <small>최대 3000수취액</small>
          </div>
        </div>
      </div>

      <!-- 오른쪽 섹션 - 결제 금액 -->
      <div class="right-section">
        <div class="payment-summary">
          <h2 class="summary-title">결제금액</h2>

          <div class="price-row">
            <span class="price-label">총 상품 금액</span>
            <span class="price-value" th:text="${#numbers.formatDecimal(order.totalPrice, 0, 'COMMA', 0, 'POINT')} + '원'">139,000원</span>
          </div>

          <div class="price-row">
            <span class="price-label">배송비</span>
            <span class="price-value">40,000원</span>
          </div>

          <div class="price-row">
            <span class="price-label">쿠폰 사용</span>
            <span class="price-value">0원</span>
          </div>

          <div class="price-row">
            <span class="price-label">포인트 사용</span>
            <span class="price-value">0원</span>
          </div>

          <div class="total-row">
            <span class="total-label">최종 결제 금액</span>
            <span class="total-price" th:text="${#numbers.formatDecimal(order.totalAmount + 40000, 0, 'COMMA', 0, 'POINT')} + ' 원'">179,000 원</span>
            <span class="installment-text">139 P 적립 예정</span>
          </div>

          <div class="terms-notice">
            받아볼 텍스트 제안 이후입니다, 추후 내용을 업데이트합니다.
            <br><br>
            이용약관/결제대행 및 쇼핑몰 이용약관 개인정보 수집, 결제대행 서비스와 등 서비스에 대한 저 공인 시킬인증을 필이 방면 내용입니다.
          </div>

          <button type="button" class="payment-btn" th:text="${#numbers.formatDecimal(order.totalAmount + 40000, 0, 'COMMA', 0, 'POINT')} + '원 결제하기'">179,000 원 결제하기</button>
        </div>
      </div>
    </div>
  </div>

  <div th:replace="fragments/layout :: footer"></div>

  <style>
    .payment-method {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .method-option {
      display: flex;
      align-items: center;
    }

    .method-option input[type="radio"] {
      margin-right: 12px;
    }

    .method-option label {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      font-size: 14px;
    }

    .method-logo {
      font-size: 16px;
    }

    .method-tag {
      background: #e3f2fd;
      color: #1976d2;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: 500;
    }

    .installment-info {
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid #eee;
      font-size: 12px;
      color: #666;
    }

    .installment-info p {
      margin: 0;
      font-weight: 500;
      color: #333;
    }

    .installment-info small {
      display: block;
      margin-top: 4px;
    }
  </style>
</body>
</html>